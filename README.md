# üåê OpenWRT –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è: DoH + –±–∞–∑–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

> **–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —ç–ø–æ–ø–µ–∏ —Ä–æ—É—Ç–µ—Ä–∞ Xiaomi Router AX3000T**  
> –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ OpenWRT —Å DNS over HTTPS –∏ –ø–æ–ª–µ–∑–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫—É –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –æ—Å–Ω–æ–≤–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è OpenWRT, –≤–∫–ª—é—á–∞—è:

- üö´ **–û—Ç–∫–ª—é—á–µ–Ω–∏–µ IPv6** - –ø–æ–ª–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- üåê **Internet Detector** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É  
- üîß **Podkop** - —Ä—É—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- üîí **DNS over HTTPS (DoH)** - –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ DNS –∑–∞–ø—Ä–æ—Å—ã

## üéØ –ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç

### DNS over HTTPS (DoH)
**DNS over HTTPS** ‚Äî –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏–º—ë–Ω DNS –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É HTTPS. –¶–µ–ª—å—é –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —ç—Ç–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ —è–≤–ª—è–µ—Ç—Å—è –ø–æ–≤—ã—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏.

**–†–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- ‚úÖ –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ Discord
- ‚úÖ –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ ChatGPT  
- ‚úÖ –ü–æ–≤—ã—à–µ–Ω–Ω–∞—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å DNS-–∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –û–±—Ö–æ–¥ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –¢–æ —á—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ ‚Äî –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç, —Ç–æ —á—Ç–æ —Ä–∞–±–æ—Ç–∞–ª–æ ‚Äî –º–æ–∂–µ—Ç –æ—Ç–≤–∞–ª–∏—Ç—å—Å—è. –ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ –≤–∞—à–∏–º —Å–∞–π—Ç–∞–º, –≤–æ–∑–º–æ–∂–Ω–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ firewall.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –°–∫–∞—á–∏–≤–∞–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º —É—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
wget -O - https://raw.githubusercontent.com/[–≤–∞—à-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π]/main/install_openwrt_full.sh | sh
```

### –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–°–∫–∞—á–∞—Ç—å —Å–∫—Ä–∏–ø—Ç:**
```bash
wget https://raw.githubusercontent.com/[–≤–∞—à-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π]/main/install_openwrt_full.sh
chmod +x install_openwrt_full.sh
```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É:**
```bash
./install_openwrt_full.sh
```

## üîß –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ DoH

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å DNS over HTTPS:

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ DoH

–ó–∞–π–¥–∏—Ç–µ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–æ—É—Ç–µ—Ä–∞ ‚Üí **System** ‚Üí **Software** ‚Üí **Update list**

–í —Ñ–∏–ª—å—Ç—Ä–µ –Ω–∞–π–¥–∏—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:
- `https-dns-proxy`
- `luci-app-https-dns-proxy` 
- `luci-i18n-https-dns-proxy-ru` (–¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞)

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTPS DNS Proxy

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–°–ª—É–∂–±—ã** ‚Üí **HTTPS DNS –ü—Ä–æ–∫—Å–∏**
2. –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Google –∏ Cloudflare
3. –ù–∞–∂–º–∏—Ç–µ **"–î–æ–±–∞–≤–∏—Ç—å"**
4. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä: **Comss DNS (RU)**
5. Bootstrap DNS: `1.1.1.1,8.8.8.8`
6. –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Å—Ç–∞–≤—å—Ç–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
7. **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å** ‚Üí **–ü—Ä–∏–º–µ–Ω–∏—Ç—å**

## üì¶ –ß—Ç–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|-----------|----------|--------|
| **IPv6 –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ** | –ü–æ–ª–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ IPv6 | ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| **Internet Detector** | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è | ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| **Podkop** | –†—É—Å–∏—Ñ–∏–∫–∞—Ü–∏—è + –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã | ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| **DoH –ø–∞–∫–µ—Ç—ã** | –¢—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ | ‚ö†Ô∏è –í—Ä—É—á–Ω—É—é |

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **OpenWRT 23.05+** 
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** aarch64_cortex-a53 (–¥–ª—è AX3000T)
- **SSH –¥–æ—Å—Ç—É–ø** –∫ —Ä–æ—É—Ç–µ—Ä—É
- **–ò–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ** –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
```bash
opkg print-architecture
```

### –õ–æ–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
–°–∫—Ä–∏–ø—Ç –≤—ã–≤–æ–¥–∏—Ç —Ü–≤–µ—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Ö–æ–¥–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:
- üü¢ **–ó–µ–ª–µ–Ω—ã–π** - —É—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- üü° **–ñ–µ–ª—Ç—ã–π** - —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å  
- üî¥ **–ö—Ä–∞—Å–Ω—ã–π** - –æ—à–∏–±–∫–∏

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DoH –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:

1. **Discord** - –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è –±–µ–∑ VPN
2. **ChatGPT** - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω
3. **DNS —É—Ç–µ—á–∫–∏** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ dnsleaktest.com

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –°–∞–π—Ç –≤—ã–ø–∞–ª –∏–∑ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
–ï—Å–ª–∏ –≤–∞—à —Å–∞–π—Ç —Å—Ç–∞–ª –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:

1. –ó–∞–π–¥–∏—Ç–µ –≤ **Network** ‚Üí **Firewall** ‚Üí **Custom Rules**
2. –î–æ–±–∞–≤—å—Ç–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –¥–æ–º–µ–Ω–∞
3. –ò–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ DoH –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π DoH –ø—Ä–æ–≤–∞–π–¥–µ—Ä
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Bootstrap DNS —Å–µ—Ä–≤–µ—Ä–∞
- –ò–∑–º–µ–Ω–∏—Ç–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç DNS —Å–µ—Ä–≤–µ—Ä–æ–≤

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

- üêõ **–ë–∞–≥–∏** - —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ Issues
- üí° **–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è** - Pull Requests –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è  
- üìñ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –ø–æ–º–æ–≥–∏—Ç–µ —É–ª—É—á—à–∏—Ç—å README

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [OpenWRT Official](https://openwrt.org/)
- [DNS over HTTPS RFC](https://tools.ietf.org/html/rfc8484)
- [Comss DNS](https://dns.comss.ru/)
- [Internet Detector](https://github.com/gSpotx2f/packages-openwrt)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –¥–ª—è –ª–∏—á–Ω—ã—Ö –∏ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö —Ü–µ–ª–µ–π.

---

<div align="center">
  <strong>üåü –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –ø–æ–º–æ–≥ - –ø–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥–æ—á–∫—É! üåü</strong>
</div>